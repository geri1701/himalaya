name: build musl

on:
  pull_request:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Builds Musl
        run: |
          docker run -v "${PWD}:/volume" --rm -t clux/muslrust:stable cargo build --release

      - name: Lists
        run: |
          ls -al target/release

      - name: Archive code coverage results
        uses: actions/upload-artifact@v3
        with:
          name: himalaya-musl
          path: target/x86_64-unknown-linux-musl/release/himalaya
